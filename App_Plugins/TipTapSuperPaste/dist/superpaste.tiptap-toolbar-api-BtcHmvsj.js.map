{"version":3,"file":"superpaste.tiptap-toolbar-api-BtcHmvsj.js","sources":["../client/src/superpaste.tiptap-toolbar-api.ts"],"sourcesContent":["import { UmbTiptapToolbarElementApiBase } from '@umbraco-cms/backoffice/tiptap';\nimport type { Editor } from '@umbraco-cms/backoffice/tiptap';\nimport { cleanWordHtml, cleanText } from './superpaste.utils';\n\nexport default class UmbTiptapToolbarSuperPasteExtensionApi extends UmbTiptapToolbarElementApiBase {\n    override async execute(editor?: Editor) {\n        if (!editor) return;\n\n        try {\n            const clipboardItems = await navigator.clipboard.read();\n\n            for (const item of clipboardItems) {\n                // Try to get HTML first (for Word content)\n                if (item.types.includes('text/html')) {\n                    const blob = await item.getType('text/html');\n                    const html = await blob.text();\n\n                    if (html) {\n                        const cleanedHtml = cleanWordHtml(html);\n                        editor.chain().focus().insertContent(cleanedHtml).run();\n                        return;\n                    }\n                }\n\n                // Fall back to plain text\n                if (item.types.includes('text/plain')) {\n                    const blob = await item.getType('text/plain');\n                    const text = await blob.text();\n\n                    if (text) {\n                        const cleanedText = cleanText(text);\n                        editor.chain().focus().insertContent(cleanedText).run();\n                        return;\n                    }\n                }\n            }\n        } catch (err) {\n            console.warn('Super Paste: Could not read clipboard', err);\n        }\n    }\n}\n"],"names":["UmbTiptapToolbarSuperPasteExtensionApi","UmbTiptapToolbarElementApiBase","editor","clipboardItems","item","html","cleanedHtml","cleanWordHtml","text","cleanedText","cleanText","err"],"mappings":";;AAIA,MAAqBA,UAA+CC,EAA+B;AAAA,EAC/F,MAAe,QAAQC,GAAiB;AACpC,QAAKA;AAEL,UAAI;AACA,cAAMC,IAAiB,MAAM,UAAU,UAAU,KAAA;AAEjD,mBAAWC,KAAQD,GAAgB;AAE/B,cAAIC,EAAK,MAAM,SAAS,WAAW,GAAG;AAElC,kBAAMC,IAAO,OADA,MAAMD,EAAK,QAAQ,WAAW,GACnB,KAAA;AAExB,gBAAIC,GAAM;AACN,oBAAMC,IAAcC,EAAcF,CAAI;AACtC,cAAAH,EAAO,QAAQ,MAAA,EAAQ,cAAcI,CAAW,EAAE,IAAA;AAClD;AAAA,YACJ;AAAA,UACJ;AAGA,cAAIF,EAAK,MAAM,SAAS,YAAY,GAAG;AAEnC,kBAAMI,IAAO,OADA,MAAMJ,EAAK,QAAQ,YAAY,GACpB,KAAA;AAExB,gBAAII,GAAM;AACN,oBAAMC,IAAcC,EAAUF,CAAI;AAClC,cAAAN,EAAO,QAAQ,MAAA,EAAQ,cAAcO,CAAW,EAAE,IAAA;AAClD;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ,SAASE,GAAK;AACV,gBAAQ,KAAK,yCAAyCA,CAAG;AAAA,MAC7D;AAAA,EACJ;AACJ;"}